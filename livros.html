

<!DOCTYPE html>
<html lang="pt-br">

<head>
    <title>Biblioteca</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="servicosStyle.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <article>
        <ul>
            <li class="my_dropdown">
                <a href="index.html" class="my_dropbtn">Home</a>
            </li>
            <li class="my_dropdown">
                <a href="sobre_escola.html" class="my_dropbtn">Sobre a escola</a>
                <div class="my_dropdown-content">
                    <a href="sobre_escola.html#fundamentos">fundamentos</a>
                    <a href="sobre_escola.html#novidades">novidades</a>
                    <a href="sobre_escola.html#rodape">localização</a>
                    <a href="sobre_escola.html#rodape">contato</a>
                </div>
            </li>
            <li class="my_dropdown">
                <a href="sobre_biblioteca.html" class="my_dropbtn">Biblioteca</a>
                <div class="my_dropdown-content">
                    <a href="sobre_biblioteca.html">Sobre</a>
                    <a href="livros.html">Livros</a>
                </div>
            </li>
            <li class="my_dropdown">
                <a href="produtos.html" class="my_dropbtn">Produtos</a>
                <div class="my_dropdown-content">
                    <a href="produtos.html">Materiais</a>
                </div>
            </li>
            <li class="my_dropdown">
                <a href="servicos.html" class="my_dropbtn">Serviços</a>
                <div class="my_dropdown-content">
                    <a href="servicos.html#cursos">Cursos</a>
                    <a href="servicos.html#aulas_particulares">Aulas particulares</a>
                </div>
            </li>
            <li class="my_dropdown">
                <a href="login.html" class="my_dropbtn">Login</a>
            </li>
        </ul>
    </article>

    <br />
    <br />
    <br />
    <br />

    <nav class="container bg-body-tertiary row justify-content-md-center">
        <div class="d-flex w-auto p3">
            <form class="d-flex forms-container" role="search">
                <input class="form-control me-3 box-c" type="search" placeholder="Search" aria-label="Search"
                    id="search_string">
                <button class="btn btn-outline-success" type="submit" id="search_button">Search</button>
            </form>
            <span class="mt-2 px-md-5" style="font-size: 20px;">Qual livro você está procurando?</span>
        </div>
    </nav>
    <div id="livros-container" class="d-flex flex-row offset-md-1"></div>

    <br />
    <br />
    <br />
    <br />
    <br />
    <section class="rodape" id="rodape">
        <div class="divMap">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3950.
            4559079005962!2d-34.89033712408739!3d-8.054890180471256!2m3!1f0!2f0!3f0!
            3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x7ab18ea6e481ed1%3A0x2bd9d6c2a072628d!
            2sUniversidade%20Cat%C3%B3lica%20de%20Pernambuco%20-%20Polo%20Ead%20Unicap!
            5e0!3m2!1spt-BR!2sbr!4v1713674602546!5m2!1spt-BR!2sbr" class="mapa" allowfullscreen="" loading="lazy"
                referrerpolicy="no-referrer-when-downgrade" id="local"></iframe>
        </div>
        <div>
            <br>
            <h2>
                Localização
            </h2>
            <br>
            <p>
                R. do Príncipe, 526 - Boa Vista,
                <br>
                Recife - PE - 50050-900
            </p>
            <br>
            <br>
            <br>
        </div>
        <hr>
        <div>
            <br>
            <h2>
                Entre em contato
            </h2>
            <br>
            <ul>
                <li>
                    Email: colegiointerestelar@gmail.com
                </li>
                <br>
                <br>
                <li>
                    Num. Secretaria: +55 81 4002-8922
                </li>
                <br>
                <br>
                <li>
                    Num. Dep. esportes: +55 81 4002-8923
                </li>
                <br>
                <br>
                <li>
                    Num. Diretoria: +55 81 4002-8924
                </li>
                <br>
                <br>
                <li>
                    <img src="images/sobreEscola/facebook-messenger-svgrepo-com.svg" width="2%">
                    <img src="images/sobreEscola/facebook-svgrepo-com.svg" width="2%">
                    <img src="images/sobreEscola/instagram-logo-facebook-2-svgrepo-com.svg" width="3%">
                    <img src="images/sobreEscola/whatsapp-svgrepo-com.svg" width="3%">
                </li>
            </ul>
        </div>
        <div>
            <img src="images/logo.png" width="320px" height="320px">
        </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"></script>
</body>

<script>
    const urlBase = "https://parseapi.back4app.com/classes/Livro";

    let data = [];

    const carregarLivros = async () => {
        const response = await fetch(urlBase, {
            method: "GET",
            headers: {
                "Content-Type": "application/json",
                "X-Parse-Application-Id": "awPjmitwQWHohlqbzx3EoHaZBYn4ZZsAl1L2ZEvO",
                "X-Parse-REST-API-Key": "PoLLLNspCNEePQ7KYev4TNR9lMVJ8we60eeBOtQ9"
            },
        });
        data = await response.json();
    };

    const compareLivros = async () => {
        const input_busca = document.getElementById("search_string").value.toLowerCase();
        let cont = 0;
        let filteredLivros = [];

        for (const livro of data.results) {
            if (input_busca === livro.nome.toLowerCase() || input_busca === livro.autor.toLowerCase()) {
                filteredLivros.push(livro);
                cont = 1;
            }
        }

        if (cont === 0) {
            alert(`Livro não encontrado`);
        } else {
            exibirLivros(filteredLivros);
        }
    };

    const exibirLivros = (livros) => {
        const container = document.getElementById("livros-container");
        container.innerHTML = ""; // Limpa o contêiner

        livros.forEach(livro => {
            const card = document.createElement("div");
            card.className = "container mt-5";
            card.innerHTML = `
                <div class="card" style="width: 18rem;">
                    <img src="${livro.foto.url}" class="card-img-top" alt="Imagem do livro ${livro.nome}">
                    <div class="card-body">
                        <h5 class="card-title">${livro.nome}</h5>
                        <p class="card-text">R$ ${livro.preco}</p>
                        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#${livro.objectId}">
                            Compra/Empréstimo
                        </button>
                    </div>
                </div>
                <div class="modal fade" id="${livro.objectId}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h1 class="modal-title fs-5" id="exampleModalLabel">${livro.nome}</h1>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <img src="${livro.foto.url}">
                                <br/>
                                <br/>
                                <p>${livro.descricao}</p>
                                <p>R$ ${livro.preco}</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary">Empréstimo</button>
                                <button type="button" class="btn btn-primary">Comprar</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            container.appendChild(card);
        });
    };

    document.getElementById("search_button").addEventListener("click", async function (event) {
        event.preventDefault(); // Previne o reload da página ao clicar no botão
        await carregarLivros();
        await compareLivros();
    });

    // Carrega os livros inicialmente
    carregarLivros();
</script>

</html>
